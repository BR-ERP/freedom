<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="VendasSetor" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="30" rightMargin="30" topMargin="20" bottomMargin="20">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<parameter name="LOGOEMP" class="java.lang.Object" isForPrompting="false">
		<parameterDescription><![CDATA[Logo da Empresa]]></parameterDescription>
		<defaultValueExpression><![CDATA[null]]></defaultValueExpression>
	</parameter>
	<parameter name="FILTROS" class="java.lang.String" isForPrompting="false">
		<parameterDescription><![CDATA[Filtros utilizados no relatório]]></parameterDescription>
	</parameter>
	<parameter name="CODFILIAL" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[new Integer(1)]]></defaultValueExpression>
	</parameter>
	<parameter name="CODEMP" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[new Integer(71)]]></defaultValueExpression>
	</parameter>
	<parameter name="CODSETOR" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[new Integer(11)]]></defaultValueExpression>
	</parameter>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["/home/bln/desenv_freedom/trunk/freedom/src/org/freedom/relatorios/"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT C2.PESSOACLI, C2.CODTIPOCLI,TI.DESCTIPOCLI,C2.RAZCLI,C2.CODCLI, V.SERIE, V.DOCVENDA, V.TIPOVENDA, V.CODVENDA, SUM(IV.QTDITVENDA) QTDVENDA, SUM(IV.VLRLIQITVENDA) VLRVENDA
FROM VDVENDA V, VDITVENDA IV, VDVENDEDOR VD, EQPRODUTO P, EQGRUPO G, EQTIPOMOV TM, VDTIPOCLI TI, VDCLIENTE C, VDCLIENTE C2
WHERE V.CODEMP=71 AND V.CODFILIAL=1 AND V.DTEMITVENDA
BETWEEN '06.07.2011' AND '07.08.2011' AND V.CODEMPCL=C.CODEMP AND V.CODFILIALCL=C.CODFILIAL
AND V.CODCLI=C.CODCLI AND C2.CODEMP=C.CODEMPPQ AND C2.CODFILIAL=C.CODFILIALPQ AND C2.CODCLI=C.CODPESQ
AND TI.CODEMP=C2.CODEMPTI AND TI.CODFILIAL=C2.CODFILIALTI AND TI.CODTIPOCLI=C2.CODTIPOCLI AND IV.CODEMP=V.CODEMP
AND IV.CODFILIAL=V.CODFILIAL AND IV.CODVENDA=V.CODVENDA AND IV.TIPOVENDA=V.TIPOVENDA AND VD.CODEMP=V.CODEMPVD AND VD.CODFILIAL=V.CODFILIALVD
AND VD.CODVEND=V.CODVEND AND C.CODSETOR IS NOT NULL AND P.CODEMP=IV.CODEMPPD AND P.CODFILIAL=IV.CODFILIALPD AND P.CODPROD=IV.CODPROD AND G.CODEMP=P.CODEMPGP
AND G.CODFILIAL=P.CODFILIALGP AND TM.CODEMP=V.CODEMPTM AND TM.CODFILIAL=V.CODFILIALTM AND TM.CODTIPOMOV=V.CODTIPOMOV  AND TM.FISCALTIPOMOV='S'  AND TM.SOMAVDTIPOMOV='S'
AND NOT SUBSTR(V.STATUSVENDA,1,1)='C'  AND P.CODGRUP=G.CODGRUP AND C.CODSETOR=11
GROUP BY 1,2,3,4,5,6,7,8,9
ORDER BY 1 DESC,2,3,4,5,6,7]]>
	</queryString>
	<field name="PESSOACLI" class="java.lang.String"/>
	<field name="CODTIPOCLI" class="java.lang.Integer"/>
	<field name="DESCTIPOCLI" class="java.lang.String"/>
	<field name="RAZCLI" class="java.lang.String"/>
	<field name="CODCLI" class="java.lang.Integer"/>
	<field name="SERIE" class="java.lang.String"/>
	<field name="DOCVENDA" class="java.lang.Integer"/>
	<field name="TIPOVENDA" class="java.lang.String"/>
	<field name="CODVENDA" class="java.lang.Integer"/>
	<field name="QTDVENDA" class="java.math.BigDecimal"/>
	<field name="VLRVENDA" class="java.math.BigDecimal"/>
	<variable name="TOTALQTD" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{QTDVENDA}]]></variableExpression>
	</variable>
	<variable name="TOTALVLR" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{VLRVENDA}]]></variableExpression>
	</variable>
	<variable name="SUBTOTALQTDPESSOA" class="java.math.BigDecimal" resetType="Group" resetGroup="PESSOA" calculation="Sum">
		<variableExpression><![CDATA[$F{QTDVENDA}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="SUBTOTALVLRPESSOA" class="java.math.BigDecimal" resetType="Group" resetGroup="PESSOA" calculation="Sum">
		<variableExpression><![CDATA[$F{VLRVENDA}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<group name="GERAL">
		<groupExpression><![CDATA[]]></groupExpression>
		<groupHeader>
			<band splitType="Stretch"/>
		</groupHeader>
		<groupFooter>
			<band height="18" splitType="Stretch">
				<staticText>
					<reportElement x="2" y="5" width="327" height="13"/>
					<textElement verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[TOTAL GERAL]]></text>
				</staticText>
				<line>
					<reportElement key="line-6" mode="Opaque" x="0" y="0" width="535" height="1" forecolor="#000000" backcolor="#FFFFFF"/>
					<graphicElement fill="Solid">
						<pen lineWidth="0.5" lineStyle="Solid"/>
					</graphicElement>
				</line>
				<textField pattern="#,##0.00">
					<reportElement x="332" y="4" width="58" height="13"/>
					<textElement textAlignment="Right">
						<font isBold="true"/>
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{TOTALQTD}]]></textFieldExpression>
				</textField>
				<textField pattern="#,##0.00">
					<reportElement x="398" y="4" width="57" height="13"/>
					<textElement textAlignment="Right">
						<font isBold="true"/>
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{TOTALVLR}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<group name="PESSOA">
		<groupExpression><![CDATA[$F{PESSOACLI}]]></groupExpression>
		<groupHeader>
			<band height="26" splitType="Stretch">
				<textField>
					<reportElement x="2" y="9" width="528" height="15"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA["Pessoa " + ("J".equals($F{PESSOACLI})?"Jurídica":"Física" )]]></textFieldExpression>
				</textField>
				<line>
					<reportElement x="0" y="25" width="535" height="1"/>
				</line>
				<line>
					<reportElement x="0" y="8" width="535" height="1"/>
				</line>
				<line>
					<reportElement x="534" y="9" width="1" height="16"/>
				</line>
				<line>
					<reportElement x="0" y="9" width="1" height="16"/>
				</line>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="18" splitType="Stretch">
				<textField pattern="#,##0.00">
					<reportElement x="398" y="2" width="57" height="16"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="10"/>
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{SUBTOTALVLRPESSOA}]]></textFieldExpression>
				</textField>
				<textField pattern="#,##0.00">
					<reportElement x="318" y="2" width="72" height="16"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="10"/>
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{SUBTOTALQTDPESSOA}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="2" y="2" width="260" height="16"/>
					<textElement verticalAlignment="Middle" markup="none">
						<font size="9" isBold="true"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA["SUB-TOTAL" + " " + $F{DESCTIPOCLI}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<group name="CLIENTE">
		<groupExpression><![CDATA[$F{CODCLI}+$F{RAZCLI}]]></groupExpression>
		<groupHeader>
			<band height="33">
				<line>
					<reportElement key="line-4" mode="Opaque" x="0" y="15" width="535" height="1" forecolor="#CCCCCC" backcolor="#FFFFFF"/>
					<graphicElement fill="Solid">
						<pen lineWidth="0.5" lineStyle="Solid"/>
					</graphicElement>
				</line>
				<textField>
					<reportElement x="49" y="0" width="250" height="15"/>
					<textElement verticalAlignment="Middle"/>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{CODCLI} + " - " + $F{RAZCLI}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="2" y="0" width="45" height="15"/>
					<textElement verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Cliente:]]></text>
				</staticText>
				<staticText>
					<reportElement x="318" y="16" width="72" height="15"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Quantidade]]></text>
				</staticText>
				<staticText>
					<reportElement x="398" y="16" width="57" height="16"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Valor]]></text>
				</staticText>
				<staticText>
					<reportElement x="478" y="15" width="52" height="16"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Num.Doc]]></text>
				</staticText>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="2">
				<line>
					<reportElement key="line-6" mode="Opaque" x="0" y="1" width="535" height="1" forecolor="#000000" backcolor="#FFFFFF"/>
					<graphicElement fill="Solid">
						<pen lineWidth="0.5" lineStyle="Solid"/>
					</graphicElement>
				</line>
				<line>
					<reportElement key="line-7" mode="Opaque" x="0" y="0" width="535" height="1" forecolor="#CCCCCC" backcolor="#FFFFFF"/>
					<graphicElement fill="Solid">
						<pen lineWidth="0.5" lineStyle="Solid"/>
					</graphicElement>
				</line>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="54" splitType="Stretch"/>
	</title>
	<pageHeader>
		<band height="7" splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="14" splitType="Stretch">
			<textField pattern="###0">
				<reportElement x="468" y="0" width="62" height="14"/>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{DOCVENDA}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="318" y="0" width="72" height="14"/>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{QTDVENDA}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="398" y="0" width="57" height="14"/>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{VLRVENDA}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="21" splitType="Stretch">
			<line>
				<reportElement key="line-8" mode="Opaque" x="1" y="2" width="533" height="1" forecolor="#000000" backcolor="#FFFFFF"/>
				<graphicElement fill="Solid">
					<pen lineWidth="2.0" lineStyle="Solid"/>
				</graphicElement>
			</line>
			<textField pattern="" isBlankWhenNull="false">
				<reportElement key="textField" mode="Transparent" x="318" y="3" width="216" height="18" forecolor="#000000" backcolor="#FFFFFF"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Top" rotation="None" lineSpacing="Single">
					<font fontName="SansSerif" size="8" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="CP1252" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Página " + $V{PAGE_NUMBER} + " de " + "" + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>
