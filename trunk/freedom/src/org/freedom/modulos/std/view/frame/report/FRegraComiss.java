/**
 * @version 20/05/2008 <BR>
 * @author Setpoint Informática Ltda.<BR>
 * 
 * Projeto: Freedom <BR>
 * 
 * Pacote: org.freedom.modulos.std <BR>
 * Classe:
 * @(#)FRegraFiscal.java <BR>
 * 
 * Este arquivo é parte do sistema Freedom-ERP, o Freedom-ERP é um software livre; você pode redistribui-lo e/ou <BR>
 * modifica-lo dentro dos termos da Licença Pública Geral GNU como publicada pela Fundação do Software Livre (FSF); <BR>
 * na versão 2 da Licença, ou (na sua opnião) qualquer versão. <BR>
 * Este programa é distribuido na esperança que possa ser  util, mas SEM NENHUMA GARANTIA; <BR>
 * sem uma garantia implicita de ADEQUAÇÂO a qualquer MERCADO ou APLICAÇÃO EM PARTICULAR. <BR>
 * Veja a Licença Pública Geral GNU para maiores detalhes. <BR>
 * Você deve ter recebido uma cópia da Licença Pública Geral GNU junto com este programa, se não, <BR>
 * de acordo com os termos da LPG-PC <BR>
 * <BR>
 * 
 * Comentários sobre a classe...
 * 
 */

package org.freedom.modulos.std.view.frame.report;

import org.freedom.infra.model.jdbc.DbConnection;
import org.freedom.library.persistence.GuardaCampo;
import org.freedom.library.persistence.ListaCampos;
import org.freedom.library.swing.component.JCheckBoxPad;
import org.freedom.library.swing.component.JPanelPad;
import org.freedom.library.swing.component.JTextFieldFK;
import org.freedom.library.swing.component.JTextFieldPad;
import org.freedom.library.swing.frame.FDetalhe;

public class FRegraComiss extends FDetalhe {

	private static final long serialVersionUID = 1L;

	private JPanelPad pinCab = new JPanelPad();

	private JPanelPad pinDet = new JPanelPad();

	private JTextFieldPad txtCodRegrComis = new JTextFieldPad( JTextFieldPad.TP_INTEGER, 4, 0 );

	private JTextFieldPad txtDescRegrComis = new JTextFieldPad( JTextFieldPad.TP_STRING, 50, 0 );

	private JTextFieldPad txtCodTipoVend = new JTextFieldPad( JTextFieldPad.TP_INTEGER, 4, 0 );

	private JTextFieldFK txtDescTipoVend = new JTextFieldFK( JTextFieldPad.TP_STRING, 50, 0 );

	private JTextFieldPad txtPercComis = new JTextFieldPad( JTextFieldPad.TP_DECIMAL, 7, 3 );

	private JTextFieldPad txtSeqComis = new JTextFieldPad( JTextFieldPad.TP_INTEGER, 8, 0 );

	private JCheckBoxPad cbObrig = new JCheckBoxPad( "Sim", "S", "N" );

	private ListaCampos lcTipoVend = new ListaCampos( this, "TV" );
	

	public FRegraComiss() {

		setTitulo( "Regra de comissionamento" );
		setAtribos( 50, 50, 600, 450 );
		
		pinCab = new JPanelPad( 440, 60 );
		setListaCampos( lcCampos );
		setPainel( pinCab, pnCliCab );
		adicCampo( txtCodRegrComis, 7, 20, 80, 20, "CodRegrComis", "Cód.regra", ListaCampos.DB_PK, true );
		adicCampo( txtDescRegrComis, 90, 20, 300, 20, "DescRegrComis", "Descrição da regra de comissionamento", ListaCampos.DB_SI, true );
		setListaCampos( true, "REGRACOMIS", "VD" );
		lcCampos.setQueryInsert( true );

		lcTipoVend.add( new GuardaCampo( txtCodTipoVend, "CodTipoVend", "Cód.tp.comis.", ListaCampos.DB_PK, false ) );
		lcTipoVend.add( new GuardaCampo( txtDescTipoVend, "DescTipoVend", "Descrição do tipo de comissionado", ListaCampos.DB_SI, false ) );
		lcTipoVend.montaSql( false, "TIPOVEND", "VD" );
		lcTipoVend.setQueryCommit( false );
		lcTipoVend.setReadOnly( true );
		txtCodTipoVend.setTabelaExterna( lcTipoVend, null );

		setAltDet( 80 );

		pinDet = new JPanelPad( 600, 80 );
		setPainel( pinDet, pnDet );
		setListaCampos( lcDet );
		setNavegador( navRod );
		adicCampo( txtSeqComis, 7, 25, 30, 20, "SeqItRc", "Item", ListaCampos.DB_PK, true );
		adicCampo( txtCodTipoVend, 40, 25, 80, 20, "CodTipoVend", "Cód.tp.comis.", ListaCampos.DB_FK, txtDescTipoVend, true );
		adicDescFK( txtDescTipoVend, 123, 25, 280, 20, "DescTipoVend", "Descrição do tipo de comissionado" );
		adicCampo( txtPercComis, 406, 25, 55, 20, "PercComisItRc", "% Comis.", ListaCampos.DB_SI, true );
		adicDB( cbObrig, 461, 25, 87, 20, "ObrigItRc", "Obrigatório?", true );
		setListaCampos( true, "ITREGRACOMIS", "VD" );
		lcDet.setQueryInsert( true );

		montaTab();
		tab.setTamColuna( 220, 2 );

		btImp.addActionListener( this );
		btPrevimp.addActionListener( this );
	}

	public void setConexao( DbConnection con ) {

		super.setConexao( con );
		lcTipoVend.setConexao( con );
	}
}
