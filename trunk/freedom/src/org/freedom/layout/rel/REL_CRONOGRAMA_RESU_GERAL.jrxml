<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="REL_CRONOGRAMA_RESU_GERAL" pageWidth="842" pageHeight="595" orientation="Landscape" columnWidth="782" leftMargin="30" rightMargin="30" topMargin="20" bottomMargin="20" scriptletClass="org.freedom.scriptlet.SitContrScriptlet">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<parameter name="CODFILIAL" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[new Integer(1)]]></defaultValueExpression>
	</parameter>
	<parameter name="CODEMP" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[new Integer(03)]]></defaultValueExpression>
	</parameter>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["/home/bln/workspace/freedom/src/org/freedom/relatorios/"]]></defaultValueExpression>
	</parameter>
	<parameter name="CODCONTR" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[$P{CODCONTR}]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select cast(it.indexitcontr as varchar(10))||
(case when sit.indexitcontr is null then '' else
'.'||cast(sit.indexitcontr as varchar(10)) end )||'.'||
cast(ta.indextarefa as varchar(10))||
(case when sta.indextarefa is null then '' else
'.'||cast(sta.indextarefa as varchar(10)) end )
 indexrel,
it.indexitcontr, ta.indextarefa, ta.tipotarefa, ta.codtarefa,
cl.codcli, cl.razcli,
ct.codcontr, it.coditcontr, it.descitcontr,
ta.descdettarefa

from vdcliente cl, vdcontrato ct
left outer join vditcontrato it on
 it.codemp=ct.codemp and it.codfilial=ct.codfilial and it.codcontr=ct.codcontr
left outer join crtarefa ta on
 ta.codempct=it.codemp and ta.codfilialct=it.codfilial and
ta.codcontr=it.codcontr and
 ta.coditcontr=it.coditcontr
left outer join vdcontrato sct on
 sct.codempsp=ct.codemp and sct.codfilialsp=ct.codfilial and
sct.codcontrsp=ct.codcontr
left outer join vditcontrato sit on
 sit.codemp=sct.codemp and sit.codfilial=sct.codfilial and
sit.codcontr=sct.codcontr
left outer join crtarefa sta on
 sta.codempct=sit.codemp and sta.codfilialct=sit.codfilial and
sta.codcontr=sit.codcontr and
 sta.coditcontr=sit.coditcontr
where  cl.codemp=ct.codempcl and cl.codfilial=ct.codfilialcl and
cl.codcli=ct.codcli and
ct.codemp=$P{CODEMP} and ct.codfilial=$P{CODFILIAL} and ct.codcontr=$P{CODCONTR}
order by 1]]>
	</queryString>
	<field name="INDEXREL" class="java.lang.String"/>
	<field name="INDEXITCONTR" class="java.lang.Integer"/>
	<field name="INDEXTAREFA" class="java.lang.Integer"/>
	<field name="TIPOTAREFA" class="java.lang.String"/>
	<field name="CODTAREFA" class="java.lang.Integer"/>
	<field name="CODCLI" class="java.lang.Integer"/>
	<field name="RAZCLI" class="java.lang.String"/>
	<field name="CODCONTR" class="java.lang.Integer"/>
	<field name="CODITCONTR" class="java.lang.Integer"/>
	<field name="DESCITCONTR" class="java.lang.String"/>
	<field name="DESCDETTAREFA" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band splitType="Stretch"/>
	</title>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="52" splitType="Stretch">
			<staticText>
				<reportElement mode="Opaque" x="1" y="15" width="646" height="35" backcolor="#3D4971"/>
				<textElement/>
				<text><![CDATA[]]></text>
			</staticText>
			<line>
				<reportElement x="341" y="37" width="1" height="13"/>
			</line>
			<line>
				<reportElement x="545" y="37" width="1" height="13"/>
			</line>
			<staticText>
				<reportElement mode="Transparent" x="343" y="15" width="48" height="20" forecolor="#FFFFFF" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Prev. Total]]></text>
			</staticText>
			<staticText>
				<reportElement x="499" y="15" width="42" height="20" forecolor="#FFFFFF"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Prev. Mês]]></text>
			</staticText>
			<line>
				<reportElement x="341" y="15" width="1" height="21"/>
			</line>
			<staticText>
				<reportElement x="601" y="15" width="42" height="20" forecolor="#FFFFFF"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Saldo Mês]]></text>
			</staticText>
			<line>
				<reportElement x="443" y="15" width="1" height="21"/>
			</line>
			<line>
				<reportElement x="392" y="15" width="1" height="21"/>
			</line>
			<staticText>
				<reportElement x="448" y="15" width="43" height="20" forecolor="#FFFFFF"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Saldo. Ant.  ]]></text>
			</staticText>
			<line>
				<reportElement x="596" y="37" width="1" height="13"/>
			</line>
			<line>
				<reportElement x="392" y="37" width="1" height="13"/>
			</line>
			<line>
				<reportElement x="341" y="36" width="306" height="1"/>
			</line>
			<line>
				<reportElement x="0" y="14" width="647" height="1"/>
			</line>
			<staticText>
				<reportElement x="550" y="15" width="42" height="20" forecolor="#FFFFFF"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Rela. Mês]]></text>
			</staticText>
			<line>
				<reportElement x="494" y="15" width="1" height="21"/>
			</line>
			<staticText>
				<reportElement x="1" y="15" width="340" height="35" forecolor="#FFFFFF"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="20" isBold="true"/>
				</textElement>
				<text><![CDATA[Resumo Geral]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="15" width="1" height="35"/>
			</line>
			<line>
				<reportElement x="443" y="37" width="1" height="13"/>
			</line>
			<staticText>
				<reportElement mode="Transparent" x="396" y="15" width="43" height="20" forecolor="#FFFFFF" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Rela. Ant.]]></text>
			</staticText>
			<line>
				<reportElement x="596" y="15" width="1" height="21"/>
			</line>
			<line>
				<reportElement x="1" y="50" width="647" height="1"/>
			</line>
			<line>
				<reportElement x="494" y="37" width="1" height="13"/>
			</line>
			<line>
				<reportElement x="545" y="15" width="1" height="21"/>
			</line>
			<line>
				<reportElement x="647" y="15" width="1" height="35"/>
			</line>
		</band>
	</columnHeader>
	<detail>
		<band height="15" splitType="Stretch">
			<line>
				<reportElement stretchType="RelativeToBandHeight" x="596" y="0" width="1" height="14" forecolor="#000000"/>
			</line>
			<line>
				<reportElement stretchType="RelativeToBandHeight" x="647" y="0" width="1" height="15"/>
			</line>
			<line>
				<reportElement stretchType="RelativeToBandHeight" x="0" y="-1" width="1" height="15"/>
			</line>
			<line>
				<reportElement stretchType="RelativeToBandHeight" mode="Opaque" x="341" y="0" width="1" height="14" forecolor="#000000" backcolor="#000000"/>
			</line>
			<line>
				<reportElement stretchType="RelativeToBandHeight" x="392" y="0" width="1" height="14" forecolor="#000000"/>
			</line>
			<line>
				<reportElement stretchType="RelativeToBandHeight" x="545" y="0" width="1" height="14" forecolor="#000000"/>
			</line>
			<line>
				<reportElement stretchType="RelativeToBandHeight" x="494" y="0" width="1" height="14" forecolor="#000000"/>
			</line>
			<line>
				<reportElement positionType="Float" x="0" y="14" width="647" height="1" forecolor="#000000" backcolor="#000000"/>
			</line>
			<line>
				<reportElement stretchType="RelativeToBandHeight" x="15" y="0" width="1" height="14" forecolor="#CCCCCC"/>
			</line>
			<line>
				<reportElement stretchType="RelativeToBandHeight" x="443" y="0" width="1" height="14" forecolor="#000000"/>
			</line>
			<textField isStretchWithOverflow="true">
				<reportElement x="19" y="0" width="310" height="14"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{CODITCONTR}.toString() + " " + $F{DESCITCONTR}.trim()]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>
